generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = "file:./dev.db"
}

model User {
    id         String   @id @default(uuid())
    name       String
    email      String
    password   String
    isAdmin    Boolean
    created_at DateTime @default(now())

    rentals Rental[]

    @@map("users")
}

model Genre {
    id         String   @id @default(uuid())
    name       String
    created_at DateTime @default(now())

    movies Movie[]

    @@map("genres")
}

model Movie {
    id          String   @id @default(uuid())
    name        String
    description String
    daily_rate  Float
    fine_amount Float
    available   Boolean
    genre_id    String
    created_at  DateTime @default(now())

    rentals Rental[]

    genre Genre @relation(fields: [genre_id], references: [id])

    @@map("movies")
}

model Rental {
    id              String    @id @default(uuid())
    user_id         String
    movie_id       String
    start_at        DateTime  @default(now())
    end_at          DateTime?
    expected_return DateTime
    total           Float?

    user  User  @relation(fields: [user_id], references: [id])
    movie Movie @relation(fields: [movie_id], references: [id])

    @@map("rentals")
}
